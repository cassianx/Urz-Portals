<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Form with Canvas</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Emoji&display=swap">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
            background-color: #111111; /* Dark Background */
            color: #fff; /* White Text Color */
            font-family: 'Roboto', sans-serif; /* Roboto Font */
        }

        form {
            text-align: center;
            margin-bottom: 20px;
        }

        select {
            margin: 0 10px; /* Add margin between form dropdowns */
            font-family: 'Noto Emoji', sans-serif; /* Noto Emoji Font */
        }

        canvas {
            margin-bottom: 20px;
        }

        button {
            background-color: #4CAF50;
            /* Green background */
            border: none;
            /* Remove borders */
            color: white;
            /* White text */
            padding: 10px 20px;
            /* Some padding */
            font-size: 16px;
            /* Set a font size */
            cursor: pointer;
            /* Mouse pointer on hover */
        }
    </style>
</head>
<body>

    <form id="imageForm">
        <label for="dropdownLeft">Left:</label>
        <select id="dropdownLeft" name="dropdownLeft">
            <option value="B">🏹</option>
            <option value="C">🕯</option>
            <option value="G">🦒</option>
            <option value="H">🪝</option>
            <option value="K">🗝</option>
            <option value="P">🍕</option>
            <option value="S">🦢</option>
            <option value="T">⌛</option>
        </select>

        <label for="dropdownMiddle">Middle:</label>
        <select id="dropdownMiddle" name="dropdownMiddle">
            <!-- Same options as dropdownLeft -->
            <option value="B">🏹</option>
            <option value="C">🕯</option>
            <option value="G">🦒</option>
            <option value="H">🪝</option>
            <option value="K">🗝</option>
            <option value="P">🍕</option>
            <option value="S">🦢</option>
            <option value="T">⌛</option>
        </select>

        <label for="dropdownRight">Right:</label>
        <select id="dropdownRight" name="dropdownRight">
            <!-- Same options as dropdownLeft -->
            <option value="B">🏹</option>
            <option value="C">🕯</option>
            <option value="G">🦒</option>
            <option value="H">🪝</option>
            <option value="K">🗝</option>
            <option value="P">🍕</option>
            <option value="S">🦢</option>
            <option value="T">⌛</option>
        </select>
    </form>

    <canvas id="resultCanvas" width="960" height="540" style="background-color: #00010e;"></canvas>

    <button id="downloadButton">Download</button>

    <script>
        function generateCanvas() {
            // Get selected values from dropdowns
            const valueLeft = document.getElementById('dropdownLeft').value;
            const valueMiddle = document.getElementById('dropdownMiddle').value;
            const valueRight = document.getElementById('dropdownRight').value;

            // Generate image URLs with .png extension
            const imageUrlLeft = valueLeft + '.png';
            const imageUrlMiddle = valueMiddle + '.png';
            const imageUrlRight = valueRight + '.png';

            // Get the canvas element
            const canvas = document.getElementById('resultCanvas');
            const ctx = canvas.getContext('2d');

            // Clear previous content and set background color
            ctx.fillStyle = "#00010e";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw images on the canvas spaced evenly
            const numImages = 3;
            const imageSize = canvas.width * 0.3;
            const totalWidth = numImages * imageSize;
            const spacing = (canvas.width - totalWidth) / (numImages + 1);

            const drawImage = (img, x, y) => {
                ctx.drawImage(img, x, y, imageSize, imageSize);
            };

            const imgLeft = new Image();
            imgLeft.src = imageUrlLeft;
            imgLeft.onload = () => {
                drawImage(imgLeft, spacing, (canvas.height - imageSize) / 2);
            };

            const imgMiddle = new Image();
            imgMiddle.src = imageUrlMiddle;
            imgMiddle.onload = () => {
                drawImage(imgMiddle, spacing + imageSize + spacing, (canvas.height - imageSize) / 2);
            };

            const imgRight = new Image();
            imgRight.src = imageUrlRight;
            imgRight.onload = () => {
                drawImage(imgRight, spacing + 2 * (imageSize + spacing), (canvas.height - imageSize) / 2);
            };
        }

        // Trigger generateCanvas() when the page loads
        window.addEventListener('load', generateCanvas);

        // Trigger generateCanvas() when dropdown values change
        const dropdowns = document.querySelectorAll('select');
        dropdowns.forEach(dropdown => {
            dropdown.addEventListener('change', generateCanvas);
        });

        // Download button functionality
        const downloadButton = document.getElementById('downloadButton');
        downloadButton.addEventListener('click', () => {
            const canvas = document.getElementById('resultCanvas');
            const dataURL = canvas.toDataURL('image/jpeg');
            const link = document.createElement('a');
            link.href = dataURL;
            link.download = `${dropdownLeft.value}_${dropdownMiddle.value}_${dropdownRight.value}.jpg`;
            link.click();
        });
    </script>

</body>
</html>
